<%- include('layout/header', { title: 'Editar Libro' }) %>

<div class="container my-5">
  <div class="card shadow-sm rounded border-1">
    <div class="card-body">
      <h3 class="text-center mb-4">Editar Libro</h3>
      <form action="/editar/<%= libro.id %>" method="POST" enctype="multipart/form-data">
        <div class="mb-3">
          <label class="form-label">Título</label>
          <input type="text" class="form-control" name="titulo" value="<%= libro.titulo %>" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Autor</label>
          <input type="text" class="form-control" name="autor" value="<%= libro.autor %>" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Año</label>
          <input type="number" class="form-control" name="anio" value="<%= libro.anio %>" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Editorial</label>
          <select class="form-select" name="EditorialId" required>
            <% editoriales.forEach(e => { %>
              <option value="<%= e.id %>" <%= e.id === libro.EditorialId ? 'selected' : '' %>><%= e.nombre %></option>
            <% }) %>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Imagen actual</label><br>
          <% if (libro.imagen) { %>
            <img src="/uploads/<%= libro.imagen %>" width="100" class="rounded" />
          <% } else { %>
            <span>No hay imagen</span>
          <% } %>
        </div>
        <div class="mb-3">
          <label class="form-label">Cambiar imagen (opcional)</label>
          <input type="file" class="form-control" name="imagen" accept="image/*">
        </div>
        <button type="submit" class="btn btn-primary w-100">Actualizar</button>
      </form>
    </div>
  </div>
</div>

<%- include('layout/footer') %>
