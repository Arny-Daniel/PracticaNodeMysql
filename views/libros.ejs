<%- include('layout/header', { title: 'Lista de Libros' }) %>

<div class="container my-4">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="card shadow-sm rounded border-1">
        <div class="card-body px-4 py-4">
          <h2 class="text-center mb-4">Lista de Libros</h2>
          <div id="mensaje-alerta"></div>
          <div class="table-responsive rounded overflow-hidden">
            <% if (libros.length > 0) { %>
              <table class="table table-striped table-bordered text-center mb-0 align-middle">
                <thead class="table-dark">
                  <tr>
                    <th>Título</th>
                    <th>Autor</th>
                    <th>Año</th>
                    <th>Editorial</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <% libros.forEach(libro => { %>
                    <tr>
                      <td><%= libro.titulo %></td>
                      <td><%= libro.autor %></td>
                      <td><%= libro.anio %></td>
                      <td><%= libro.Editorial.nombre %></td>
                      <td>
                        <% if (libro.imagen) { %>
                          <img src="/uploads/<%= libro.imagen %>" alt="imagen" width="60" height="80" class="rounded" />
                        <% } else { %>
                          Sin imagen
                        <% } %>
                      </td>
                      <td>
                        <a href="/editar/<%= libro.id %>" class="btn btn-sm btn-primary me-1"><i class="fas fa-edit"></i></a>
                        <a href="/eliminar/<%= libro.id %>" class="btn btn-sm btn-danger"><i class="fas fa-trash-alt"></i></a>
                      </td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            <% } else { %>
              <div class="alert alert-warning text-center">No hay libros disponibles.</div>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('layout/footer') %>
